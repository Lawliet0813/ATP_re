# ATP_re éƒ¨ç½²æŒ‡å—

**ç‰ˆæœ¬ï¼š** 1.0  
**æ›´æ–°æ—¥æœŸï¼š** 2025-11-09  
**é©ç”¨ç³»çµ±ï¼š** ATP_re Java ç‰ˆæœ¬

---

## ğŸ“– ç›®éŒ„

1. [éƒ¨ç½²æ¦‚è¿°](#éƒ¨ç½²æ¦‚è¿°)
2. [ç³»çµ±éœ€æ±‚](#ç³»çµ±éœ€æ±‚)
3. [Windows éƒ¨ç½²](#windows-éƒ¨ç½²)
4. [macOS éƒ¨ç½²](#macos-éƒ¨ç½²)
5. [è³‡æ–™åº«è¨­å®š](#è³‡æ–™åº«è¨­å®š)
6. [ç¶²è·¯è¨­å®š](#ç¶²è·¯è¨­å®š)
7. [æ•ˆèƒ½èª¿æ ¡](#æ•ˆèƒ½èª¿æ ¡)
8. [å®‰å…¨æ€§è¨­å®š](#å®‰å…¨æ€§è¨­å®š)
9. [å‚™ä»½èˆ‡é‚„åŸ](#å‚™ä»½èˆ‡é‚„åŸ)
10. [å‡ç´šæŒ‡å—](#å‡ç´šæŒ‡å—)

---

## éƒ¨ç½²æ¦‚è¿°

### éƒ¨ç½²æ¶æ§‹

ATP_re ç³»çµ±å¯ä»¥éƒ¨ç½²ç‚ºå–®æ©Ÿç‰ˆæˆ–å®¢æˆ¶ç«¯-ä¼ºæœå™¨æ¶æ§‹ï¼š

#### å–®æ©Ÿç‰ˆéƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å–®æ©Ÿå·¥ä½œç«™                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ATP_re æ‡‰ç”¨ç¨‹å¼   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æœ¬åœ°è³‡æ–™åº«        â”‚    â”‚
â”‚  â”‚   (é¸ç”¨)            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   æœ¬åœ°æª”æ¡ˆç³»çµ±      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å®¢æˆ¶ç«¯-ä¼ºæœå™¨éƒ¨ç½²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¢æˆ¶ç«¯ 1       â”‚         â”‚   è³‡æ–™åº«ä¼ºæœå™¨    â”‚
â”‚  ATP_re æ‡‰ç”¨    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   SQL Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â–²
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  å®¢æˆ¶ç«¯ 2       â”‚                 â”‚
â”‚  ATP_re æ‡‰ç”¨    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 
                                     
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å®¢æˆ¶ç«¯ 3       â”‚         â”‚   æª”æ¡ˆä¼ºæœå™¨      â”‚
â”‚  ATP_re æ‡‰ç”¨    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   FTP Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éƒ¨ç½²æ¸…å–®

åœ¨é–‹å§‹éƒ¨ç½²å‰ï¼Œè«‹æº–å‚™ä»¥ä¸‹é …ç›®ï¼š

- [ ] ATP_re å®‰è£å¥—ä»¶ï¼ˆ.zip æˆ– .tar.gzï¼‰
- [ ] Java Runtime Environment (JRE 8+)
- [ ] è³‡æ–™åº«ä¼ºæœå™¨ï¼ˆå¦‚ä½¿ç”¨è³‡æ–™åº«æ¨¡å¼ï¼‰
- [ ] ç¶²è·¯é€£ç·šè¨­å®šè³‡è¨Š
- [ ] ç®¡ç†å“¡æ¬Šé™
- [ ] æˆæ¬Šæª”æ¡ˆï¼ˆå¦‚é©ç”¨ï¼‰

---

## ç³»çµ±éœ€æ±‚

### ç¡¬é«”éœ€æ±‚

#### æœ€ä½éœ€æ±‚ï¼ˆå–®æ©Ÿç‰ˆï¼‰

| é …ç›® | è¦æ ¼ |
|------|------|
| è™•ç†å™¨ | Intel Core i3 æˆ–åŒç´š |
| è¨˜æ†¶é«” | 4 GB RAM |
| ç¡¬ç¢Ÿç©ºé–“ | 500 MBï¼ˆç¨‹å¼ï¼‰ + 10 GBï¼ˆè³‡æ–™ï¼‰ |
| é¡¯ç¤ºå™¨ | 1280 x 720 |
| ç¶²è·¯ | 100 Mbpsï¼ˆå¦‚éœ€ FTPï¼‰ |

#### å»ºè­°éœ€æ±‚ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰

| é …ç›® | è¦æ ¼ |
|------|------|
| è™•ç†å™¨ | Intel Core i5/i7 æˆ–åŒç´šï¼ˆ4 æ ¸å¿ƒä»¥ä¸Šï¼‰ |
| è¨˜æ†¶é«” | 8-16 GB RAM |
| ç¡¬ç¢Ÿç©ºé–“ | 1 GBï¼ˆç¨‹å¼ï¼‰ + 100 GBï¼ˆè³‡æ–™ï¼‰ |
| é¡¯ç¤ºå™¨ | 1920 x 1080 æˆ–æ›´é«˜ |
| ç¶²è·¯ | 1 Gbps |

#### ä¼ºæœå™¨éœ€æ±‚ï¼ˆå®¢æˆ¶ç«¯-ä¼ºæœå™¨æ¨¡å¼ï¼‰

**è³‡æ–™åº«ä¼ºæœå™¨**
- è™•ç†å™¨ï¼š4 æ ¸å¿ƒä»¥ä¸Š
- è¨˜æ†¶é«”ï¼š16 GB RAM ä»¥ä¸Š
- ç¡¬ç¢Ÿï¼šSSDï¼Œ200 GB ä»¥ä¸Š
- RAID é…ç½®å»ºè­°

**æª”æ¡ˆä¼ºæœå™¨**
- è™•ç†å™¨ï¼š2 æ ¸å¿ƒä»¥ä¸Š
- è¨˜æ†¶é«”ï¼š8 GB RAM
- ç¡¬ç¢Ÿï¼š500 GB ä»¥ä¸Š
- å‚™ä»½ç³»çµ±

### è»Ÿé«”éœ€æ±‚

#### Windows

| é …ç›® | ç‰ˆæœ¬ |
|------|------|
| ä½œæ¥­ç³»çµ± | Windows 7 SP1 / 8.1 / 10 / 11 |
| Java Runtime | JRE 8 Update 211 æˆ–æ›´æ–°ç‰ˆæœ¬ |
| .NET Framework | 4.5.2 æˆ–æ›´æ–°ï¼ˆéƒ¨åˆ†åŠŸèƒ½ï¼‰ |
| è³‡æ–™åº« | SQL Server 2008 R2 æˆ–æ›´æ–° |

#### macOS

| é …ç›® | ç‰ˆæœ¬ |
|------|------|
| ä½œæ¥­ç³»çµ± | macOS 10.12 (Sierra) æˆ–æ›´æ–° |
| Java Runtime | JRE 8 æˆ–æ›´æ–°ç‰ˆæœ¬ |
| Xcode Command Line Tools | æœ€æ–°ç‰ˆæœ¬ |

---

## Windows éƒ¨ç½²

### æ­¥é©Ÿ 1ï¼šå®‰è£ Java Runtime Environment

1. **ä¸‹è¼‰ JRE**
   
   è¨ªå• Oracle å®˜ç¶²æˆ–ä½¿ç”¨ OpenJDKï¼š
   - Oracle JRE: https://www.java.com/
   - OpenJDK: https://adoptium.net/

2. **å®‰è£ JRE**
   
   ```cmd
   # åŸ·è¡Œå®‰è£ç¨‹å¼
   jre-8u211-windows-x64.exe
   
   # æˆ–ä½¿ç”¨éœé»˜å®‰è£ï¼ˆéœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼‰
   jre-8u211-windows-x64.exe /s INSTALLDIR=C:\Java\jre8
   ```

3. **é©—è­‰å®‰è£**
   
   ```cmd
   # é–‹å•Ÿå‘½ä»¤æç¤ºå­—å…ƒ
   cmd
   
   # æª¢æŸ¥ Java ç‰ˆæœ¬
   java -version
   
   # æ‡‰è©²é¡¯ç¤ºé¡ä¼¼è¼¸å‡ºï¼š
   # java version "1.8.0_211"
   # Java(TM) SE Runtime Environment (build 1.8.0_211-b12)
   ```

4. **è¨­å®šç’°å¢ƒè®Šæ•¸**ï¼ˆé¸ç”¨ï¼Œä½†å»ºè­°ï¼‰
   
   ```cmd
   # è¨­å®š JAVA_HOME
   setx JAVA_HOME "C:\Program Files\Java\jre1.8.0_211"
   
   # å°‡ Java bin ç›®éŒ„åŠ å…¥ PATH
   setx PATH "%PATH%;%JAVA_HOME%\bin"
   ```

### æ­¥é©Ÿ 2ï¼šè§£å£“ç¸® ATP_re

1. **å»ºç«‹å®‰è£ç›®éŒ„**
   
   ```cmd
   # å»ºè­°å®‰è£è·¯å¾‘
   mkdir "C:\Program Files\ATP_re"
   ```

2. **è§£å£“ç¸®æª”æ¡ˆ**
   
   ```cmd
   # ä½¿ç”¨ PowerShell è§£å£“ç¸®
   powershell Expand-Archive -Path ATP_re_v1.0.zip -DestinationPath "C:\Program Files\ATP_re"
   
   # æˆ–ä½¿ç”¨ 7-Zip
   "C:\Program Files\7-Zip\7z.exe" x ATP_re_v1.0.zip -o"C:\Program Files\ATP_re"
   ```

3. **é©—è­‰ç›®éŒ„çµæ§‹**
   
   ```
   C:\Program Files\ATP_re\
   â”œâ”€â”€ ATP_re.jar          # ä¸»ç¨‹å¼
   â”œâ”€â”€ ATP_re.bat          # Windows å•Ÿå‹•è…³æœ¬
   â”œâ”€â”€ config\             # è¨­å®šæª”ç›®éŒ„
   â”‚   â”œâ”€â”€ application.properties
   â”‚   â”œâ”€â”€ database.properties
   â”‚   â””â”€â”€ ftp.properties
   â”œâ”€â”€ lib\                # ç›¸ä¾å‡½å¼åº«
   â”œâ”€â”€ data\               # è³‡æ–™ç›®éŒ„
   â”œâ”€â”€ logs\               # æ—¥èªŒç›®éŒ„
   â””â”€â”€ README.txt          # èªªæ˜æ–‡ä»¶
   ```

### æ­¥é©Ÿ 3ï¼šè¨­å®šæ‡‰ç”¨ç¨‹å¼

1. **ç·¨è¼¯ä¸»è¨­å®šæª”**
   
   é–‹å•Ÿ `config/application.properties`ï¼š
   
   ```properties
   # æ‡‰ç”¨ç¨‹å¼è¨­å®š
   app.name=ATP_re
   app.version=1.0
   app.language=zh_TW
   
   # è³‡æ–™è·¯å¾‘
   data.ru.path=C:/ATP_Data/ru
   data.mmi.path=C:/ATP_Data/mmi
   data.output.path=C:/ATP_Data/output
   
   # æ—¥èªŒè¨­å®š
   log.level=INFO
   log.path=C:/Program Files/ATP_re/logs
   log.max.size=10MB
   log.max.history=30
   
   # UI è¨­å®š
   ui.theme=default
   ui.font.size=12
   ```

2. **è¨­å®šè³‡æ–™åº«é€£ç·š**ï¼ˆå¦‚ä½¿ç”¨è³‡æ–™åº«ï¼‰
   
   é–‹å•Ÿ `config/database.properties`ï¼š
   
   ```properties
   # è³‡æ–™åº«é€£ç·šè¨­å®š
   db.enabled=true
   db.type=sqlserver
   db.host=localhost
   db.port=1433
   db.name=ATP_DB
   db.user=atp_user
   db.password=YOUR_PASSWORD_HERE
   
   # é€£ç·šæ± è¨­å®š
   db.pool.min=5
   db.pool.max=20
   db.pool.timeout=30000
   
   # JDBC é©…å‹•
   db.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
   db.url=jdbc:sqlserver://${db.host}:${db.port};databaseName=${db.name}
   ```

3. **è¨­å®š FTP**ï¼ˆå¦‚éœ€è¦ï¼‰
   
   é–‹å•Ÿ `config/ftp.properties`ï¼š
   
   ```properties
   # FTP è¨­å®š
   ftp.enabled=false
   ftp.host=ftp.example.com
   ftp.port=21
   ftp.user=atp_ftp_user
   ftp.password=YOUR_FTP_PASSWORD
   ftp.passive.mode=true
   ftp.timeout=30000
   
   # è‡ªå‹•ä¸‹è¼‰è¨­å®š
   ftp.auto.download=false
   ftp.download.interval=3600
   ftp.download.path=/atp/data
   ```

### æ­¥é©Ÿ 4ï¼šå»ºç«‹è³‡æ–™ç›®éŒ„

```cmd
# å»ºç«‹å¿…è¦çš„ç›®éŒ„
mkdir "C:\ATP_Data"
mkdir "C:\ATP_Data\ru"
mkdir "C:\ATP_Data\mmi"
mkdir "C:\ATP_Data\output"
mkdir "C:\ATP_Data\reports"
mkdir "C:\ATP_Data\backup"

# è¨­å®šç›®éŒ„æ¬Šé™ï¼ˆéœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼‰
icacls "C:\ATP_Data" /grant Users:(OI)(CI)M
```

### æ­¥é©Ÿ 5ï¼šå»ºç«‹å•Ÿå‹•è…³æœ¬

ç·¨è¼¯æˆ–é©—è­‰ `ATP_re.bat`ï¼š

```batch
@echo off
REM ATP_re Windows å•Ÿå‹•è…³æœ¬

REM è¨­å®š Java è·¯å¾‘ï¼ˆå¦‚æœæ²’æœ‰åœ¨ PATH ä¸­ï¼‰
REM set JAVA_HOME=C:\Program Files\Java\jre1.8.0_211
REM set PATH=%JAVA_HOME%\bin;%PATH%

REM è¨­å®šæ‡‰ç”¨ç¨‹å¼è·¯å¾‘
set APP_HOME=%~dp0
cd /d %APP_HOME%

REM è¨­å®š JVM åƒæ•¸
set JAVA_OPTS=-Xms512m -Xmx2048m -XX:+UseG1GC

REM å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
echo æ­£åœ¨å•Ÿå‹• ATP_re...
java %JAVA_OPTS% -jar ATP_re.jar

REM å¦‚æœç¨‹å¼ç•°å¸¸çµæŸï¼Œæš«åœä»¥æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯
if errorlevel 1 pause
```

### æ­¥é©Ÿ 6ï¼šå»ºç«‹æ¡Œé¢æ·å¾‘

1. åœ¨æ¡Œé¢å³éµ â†’ æ–°å¢ â†’ æ·å¾‘
2. ä½ç½®ï¼š`"C:\Program Files\ATP_re\ATP_re.bat"`
3. åç¨±ï¼š`ATP_re`
4. åœ–ç¤ºï¼šé¸æ“‡ `ATP_re.ico`ï¼ˆå¦‚æœ‰ï¼‰

### æ­¥é©Ÿ 7ï¼šè¨­å®š Windows æœå‹™ï¼ˆé¸ç”¨ï¼‰

å¦‚æœéœ€è¦è®“ ATP_re ä½œç‚º Windows æœå‹™åŸ·è¡Œï¼š

1. **ä¸‹è¼‰ NSSM**ï¼ˆNon-Sucking Service Managerï¼‰
   
   https://nssm.cc/download

2. **å®‰è£æœå‹™**
   
   ```cmd
   # ä½¿ç”¨ç®¡ç†å“¡æ¬Šé™åŸ·è¡Œ
   nssm install ATP_re
   
   # åœ¨ GUI ä¸­è¨­å®šï¼š
   # - Path: C:\Program Files\Java\jre1.8.0_211\bin\java.exe
   # - Startup directory: C:\Program Files\ATP_re
   # - Arguments: -Xmx2048m -jar ATP_re.jar
   ```

3. **å•Ÿå‹•æœå‹™**
   
   ```cmd
   # å•Ÿå‹•æœå‹™
   net start ATP_re
   
   # è¨­å®šè‡ªå‹•å•Ÿå‹•
   sc config ATP_re start=auto
   ```

### æ­¥é©Ÿ 8ï¼šé˜²ç«ç‰†è¨­å®š

```cmd
# å…è¨± ATP_re é€šéé˜²ç«ç‰†ï¼ˆéœ€è¦ç®¡ç†å“¡æ¬Šé™ï¼‰
netsh advfirewall firewall add rule name="ATP_re" dir=in action=allow program="C:\Program Files\ATP_re\ATP_re.bat" enable=yes

# å¦‚æœä½¿ç”¨ç‰¹å®šåŸ è™Ÿï¼ˆä¾‹å¦‚ï¼š8080ï¼‰
netsh advfirewall firewall add rule name="ATP_re Port" dir=in action=allow protocol=TCP localport=8080
```

### æ­¥é©Ÿ 9ï¼šé©—è­‰å®‰è£

1. **å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼**
   
   é›™æ“Šæ¡Œé¢æ·å¾‘æˆ–åŸ·è¡Œ `ATP_re.bat`

2. **æª¢æŸ¥æ—¥èªŒ**
   
   ```cmd
   # æŸ¥çœ‹å•Ÿå‹•æ—¥èªŒ
   type "C:\Program Files\ATP_re\logs\atp.log"
   ```

3. **æ¸¬è©¦åŠŸèƒ½**
   
   - é–‹å•Ÿç¯„ä¾‹æª”æ¡ˆ
   - æª¢è¦–è³‡æ–™
   - ç”¢ç”Ÿå ±è¡¨

---

## macOS éƒ¨ç½²

### æ­¥é©Ÿ 1ï¼šå®‰è£ Java Runtime Environment

1. **ä½¿ç”¨ Homebrew å®‰è£ï¼ˆå»ºè­°ï¼‰**
   
   ```bash
   # å®‰è£ Homebrewï¼ˆå¦‚æœå°šæœªå®‰è£ï¼‰
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   
   # å®‰è£ OpenJDK
   brew install openjdk@8
   
   # å»ºç«‹ç¬¦è™Ÿé€£çµ
   sudo ln -sfn /usr/local/opt/openjdk@8/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-8.jdk
   ```

2. **æ‰‹å‹•å®‰è£**
   
   - ä¸‹è¼‰ JRE for macOSï¼šhttps://www.java.com/
   - åŸ·è¡Œ .dmg å®‰è£ç¨‹å¼
   - ä¾ç…§å®‰è£ç²¾éˆå®Œæˆå®‰è£

3. **é©—è­‰å®‰è£**
   
   ```bash
   # æª¢æŸ¥ Java ç‰ˆæœ¬
   java -version
   
   # æª¢æŸ¥ JAVA_HOME
   /usr/libexec/java_home -V
   ```

4. **è¨­å®šç’°å¢ƒè®Šæ•¸**
   
   ç·¨è¼¯ `~/.bash_profile` æˆ– `~/.zshrc`ï¼š
   
   ```bash
   # åŠ å…¥ä»¥ä¸‹å…§å®¹
   export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)
   export PATH=$JAVA_HOME/bin:$PATH
   
   # å¥—ç”¨è¨­å®š
   source ~/.bash_profile  # æˆ– source ~/.zshrc
   ```

### æ­¥é©Ÿ 2ï¼šè§£å£“ç¸® ATP_re

1. **å»ºç«‹å®‰è£ç›®éŒ„**
   
   ```bash
   # å»ºè­°å®‰è£è·¯å¾‘
   sudo mkdir -p /Applications/ATP_re
   sudo chown $USER:staff /Applications/ATP_re
   ```

2. **è§£å£“ç¸®æª”æ¡ˆ**
   
   ```bash
   # è§£å£“ç¸®
   unzip ATP_re_v1.0.zip -d /Applications/ATP_re
   
   # æˆ–ä½¿ç”¨ tarï¼ˆå¦‚æœæ˜¯ .tar.gzï¼‰
   tar -xzf ATP_re_v1.0.tar.gz -C /Applications/ATP_re
   ```

3. **è¨­å®šåŸ·è¡Œæ¬Šé™**
   
   ```bash
   # è¨­å®šåŸ·è¡Œæ¬Šé™
   chmod +x /Applications/ATP_re/ATP_re.sh
   chmod +x /Applications/ATP_re/*.sh
   
   # è¨­å®šç›®éŒ„æ¬Šé™
   chmod -R 755 /Applications/ATP_re
   ```

### æ­¥é©Ÿ 3ï¼šè¨­å®šæ‡‰ç”¨ç¨‹å¼

1. **ç·¨è¼¯ä¸»è¨­å®šæª”**
   
   ```bash
   # ä½¿ç”¨æ–‡å­—ç·¨è¼¯å™¨é–‹å•Ÿè¨­å®šæª”
   nano /Applications/ATP_re/config/application.properties
   # æˆ–
   vim /Applications/ATP_re/config/application.properties
   ```
   
   è¨­å®šå…§å®¹ï¼š
   
   ```properties
   # æ‡‰ç”¨ç¨‹å¼è¨­å®š
   app.name=ATP_re
   app.version=1.0
   app.language=zh_TW
   
   # è³‡æ–™è·¯å¾‘ï¼ˆmacOS ä½¿ç”¨çµ•å°è·¯å¾‘ï¼‰
   data.ru.path=/Users/Shared/ATP_Data/ru
   data.mmi.path=/Users/Shared/ATP_Data/mmi
   data.output.path=/Users/Shared/ATP_Data/output
   
   # æ—¥èªŒè¨­å®š
   log.level=INFO
   log.path=/Applications/ATP_re/logs
   log.max.size=10MB
   log.max.history=30
   ```

2. **è¨­å®šè³‡æ–™åº«**ï¼ˆåŒ Windowsï¼Œèª¿æ•´è·¯å¾‘ï¼‰

3. **è¨­å®š FTP**ï¼ˆåŒ Windowsï¼‰

### æ­¥é©Ÿ 4ï¼šå»ºç«‹è³‡æ–™ç›®éŒ„

```bash
# å»ºç«‹å…±äº«è³‡æ–™ç›®éŒ„
sudo mkdir -p /Users/Shared/ATP_Data/{ru,mmi,output,reports,backup}

# è¨­å®šæ¬Šé™
sudo chown -R $USER:staff /Users/Shared/ATP_Data
chmod -R 755 /Users/Shared/ATP_Data
```

### æ­¥é©Ÿ 5ï¼šå»ºç«‹å•Ÿå‹•è…³æœ¬

ç·¨è¼¯æˆ–é©—è­‰ `ATP_re.sh`ï¼š

```bash
#!/bin/bash
# ATP_re macOS å•Ÿå‹•è…³æœ¬

# å–å¾—è…³æœ¬ç›®éŒ„
APP_HOME="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
cd "$APP_HOME"

# è¨­å®š Java è·¯å¾‘
export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)
export PATH=$JAVA_HOME/bin:$PATH

# æª¢æŸ¥ Java æ˜¯å¦å·²å®‰è£
if ! command -v java &> /dev/null; then
    echo "éŒ¯èª¤ï¼šæœªæ‰¾åˆ° Javaã€‚è«‹å®‰è£ Java 8 æˆ–æ›´æ–°ç‰ˆæœ¬ã€‚"
    exit 1
fi

# è¨­å®š JVM åƒæ•¸
JAVA_OPTS="-Xms512m -Xmx2048m -XX:+UseG1GC"
JAVA_OPTS="$JAVA_OPTS -Dapple.awt.UIElement=false"
JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"

# å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
echo "æ­£åœ¨å•Ÿå‹• ATP_re..."
java $JAVA_OPTS -jar ATP_re.jar

# æª¢æŸ¥é€€å‡ºç‹€æ…‹
if [ $? -ne 0 ]; then
    echo "æ‡‰ç”¨ç¨‹å¼ç•°å¸¸çµæŸ"
    read -p "æŒ‰ Enter éµç¹¼çºŒ..."
fi
```

### æ­¥é©Ÿ 6ï¼šå»ºç«‹ macOS æ‡‰ç”¨ç¨‹å¼æ†ç¶åŒ…ï¼ˆé¸ç”¨ï¼‰

å»ºç«‹ `.app` æ ¼å¼çš„æ‡‰ç”¨ç¨‹å¼ï¼š

1. **å»ºç«‹ç›®éŒ„çµæ§‹**
   
   ```bash
   mkdir -p ATP_re.app/Contents/MacOS
   mkdir -p ATP_re.app/Contents/Resources
   ```

2. **å»ºç«‹ Info.plist**
   
   ```bash
   cat > ATP_re.app/Contents/Info.plist << 'EOF'
   <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
   <plist version="1.0">
   <dict>
       <key>CFBundleName</key>
       <string>ATP_re</string>
       <key>CFBundleDisplayName</key>
       <string>ATP_re</string>
       <key>CFBundleIdentifier</key>
       <string>com.atp.atp_re</string>
       <key>CFBundleVersion</key>
       <string>1.0</string>
       <key>CFBundlePackageType</key>
       <string>APPL</string>
       <key>CFBundleExecutable</key>
       <string>ATP_re</string>
       <key>CFBundleIconFile</key>
       <string>ATP_re.icns</string>
   </dict>
   </plist>
   EOF
   ```

3. **è¤‡è£½æª”æ¡ˆ**
   
   ```bash
   # è¤‡è£½å•Ÿå‹•è…³æœ¬
   cp /Applications/ATP_re/ATP_re.sh ATP_re.app/Contents/MacOS/ATP_re
   chmod +x ATP_re.app/Contents/MacOS/ATP_re
   
   # è¤‡è£½åœ–ç¤ºï¼ˆå¦‚æœ‰ï¼‰
   cp ATP_re.icns ATP_re.app/Contents/Resources/
   
   # ç§»å‹•åˆ° Applications
   mv ATP_re.app /Applications/
   ```

### æ­¥é©Ÿ 7ï¼šè¨­å®š LaunchAgentï¼ˆé–‹æ©Ÿè‡ªå‹•å•Ÿå‹•ï¼‰

å¦‚éœ€é–‹æ©Ÿè‡ªå‹•å•Ÿå‹•ï¼š

```bash
# å»ºç«‹ LaunchAgent plist
cat > ~/Library/LaunchAgents/com.atp.atp_re.plist << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.atp.atp_re</string>
    <key>ProgramArguments</key>
    <array>
        <string>/Applications/ATP_re/ATP_re.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
    <key>KeepAlive</key>
    <false/>
</dict>
</plist>
EOF

# è¼‰å…¥ LaunchAgent
launchctl load ~/Library/LaunchAgents/com.atp.atp_re.plist

# ç«‹å³å•Ÿå‹•
launchctl start com.atp.atp_re
```

### æ­¥é©Ÿ 8ï¼šé˜²ç«ç‰†è¨­å®š

```bash
# macOS é˜²ç«ç‰†è¨­å®šé€šå¸¸åœ¨ã€Œç³»çµ±åå¥½è¨­å®šã€â†’ã€Œå®‰å…¨æ€§èˆ‡éš±ç§ã€â†’ã€Œé˜²ç«ç‰†ã€
# å¦‚éœ€å‘½ä»¤åˆ—è¨­å®šï¼š

# å•Ÿç”¨é˜²ç«ç‰†
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --setglobalstate on

# å…è¨± ATP_re
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /Applications/ATP_re/ATP_re.sh
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --unblockapp /Applications/ATP_re/ATP_re.sh
```

### æ­¥é©Ÿ 9ï¼šé©—è­‰å®‰è£

```bash
# å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
/Applications/ATP_re/ATP_re.sh

# æŸ¥çœ‹æ—¥èªŒ
tail -f /Applications/ATP_re/logs/atp.log

# æª¢æŸ¥é€²ç¨‹
ps aux | grep ATP_re
```

---

## è³‡æ–™åº«è¨­å®š

### SQL Server è¨­å®šï¼ˆWindowsï¼‰

1. **å®‰è£ SQL Server**
   
   - ä¸‹è¼‰ SQL Server Expressï¼ˆå…è²»ç‰ˆï¼‰
   - åŸ·è¡Œå®‰è£ç¨‹å¼
   - é¸æ“‡ã€ŒåŸºæœ¬ã€å®‰è£æ¨¡å¼

2. **å»ºç«‹è³‡æ–™åº«**
   
   ```sql
   -- ä½¿ç”¨ SQL Server Management Studio æˆ– sqlcmd
   
   -- å»ºç«‹è³‡æ–™åº«
   CREATE DATABASE ATP_DB;
   GO
   
   -- åˆ‡æ›åˆ°æ–°è³‡æ–™åº«
   USE ATP_DB;
   GO
   
   -- å»ºç«‹ä½¿ç”¨è€…
   CREATE LOGIN atp_user WITH PASSWORD = 'YourStrongPassword123!';
   CREATE USER atp_user FOR LOGIN atp_user;
   GO
   
   -- æˆäºˆæ¬Šé™
   EXEC sp_addrolemember 'db_datareader', 'atp_user';
   EXEC sp_addrolemember 'db_datawriter', 'atp_user';
   GO
   ```

3. **åŸ·è¡Œåˆå§‹åŒ–è…³æœ¬**
   
   ```cmd
   # åŸ·è¡Œ ATP_re æä¾›çš„è³‡æ–™åº«åˆå§‹åŒ–è…³æœ¬
   sqlcmd -S localhost -U atp_user -P YourStrongPassword123! -d ATP_DB -i "C:\Program Files\ATP_re\sql\init.sql"
   ```

4. **å•Ÿç”¨ TCP/IP é€£ç·š**
   
   - é–‹å•Ÿã€ŒSQL Server Configuration Managerã€
   - å±•é–‹ã€ŒSQL Server ç¶²è·¯çµ„æ…‹ã€
   - é¸æ“‡ã€ŒMSSQLSERVER çš„é€šè¨Šå”å®šã€
   - å•Ÿç”¨ã€ŒTCP/IPã€
   - é‡æ–°å•Ÿå‹• SQL Server æœå‹™

### PostgreSQL è¨­å®šï¼ˆè·¨å¹³å°ï¼‰

å¦‚æœåå¥½ä½¿ç”¨ PostgreSQLï¼š

1. **å®‰è£ PostgreSQL**
   
   **Windows:**
   ```cmd
   # ä¸‹è¼‰ä¸¦å®‰è£ PostgreSQL
   # https://www.postgresql.org/download/windows/
   ```
   
   **macOS:**
   ```bash
   brew install postgresql@14
   brew services start postgresql@14
   ```

2. **å»ºç«‹è³‡æ–™åº«**
   
   ```bash
   # å»ºç«‹ä½¿ç”¨è€…
   createuser -P atp_user
   # è¼¸å…¥å¯†ç¢¼: YourStrongPassword123!
   
   # å»ºç«‹è³‡æ–™åº«
   createdb -O atp_user ATP_DB
   ```

3. **åŸ·è¡Œåˆå§‹åŒ–è…³æœ¬**
   
   ```bash
   psql -U atp_user -d ATP_DB -f /Applications/ATP_re/sql/init.sql
   ```

4. **è¨­å®šé ç«¯å­˜å–**ï¼ˆå¦‚éœ€è¦ï¼‰
   
   ç·¨è¼¯ `postgresql.conf`:
   ```
   listen_addresses = '*'
   ```
   
   ç·¨è¼¯ `pg_hba.conf`:
   ```
   host    all    all    0.0.0.0/0    md5
   ```

---

## ç¶²è·¯è¨­å®š

### FTP ä¼ºæœå™¨è¨­å®š

å¦‚æœéœ€è¦è‡ªå‹•å¾ FTP ä¼ºæœå™¨ä¸‹è¼‰è³‡æ–™ï¼š

1. **æ¸¬è©¦ FTP é€£ç·š**
   
   ```bash
   # Windows
   ftp ftp.example.com
   
   # macOS/Linux
   ftp ftp.example.com
   # æˆ–ä½¿ç”¨
   lftp ftp://username:password@ftp.example.com
   ```

2. **è¨­å®šè¢«å‹•æ¨¡å¼**
   
   åœ¨ `config/ftp.properties` ä¸­ï¼š
   ```properties
   ftp.passive.mode=true
   ```

3. **è¨­å®šé˜²ç«ç‰†è¦å‰‡**
   
   ç¢ºä¿å…è¨± FTP ä½¿ç”¨çš„åŸ è™Ÿï¼ˆé€šå¸¸æ˜¯ 20-21 å’Œè¢«å‹•æ¨¡å¼çš„é«˜ä½åŸ è™Ÿï¼‰

### ç¶²è·¯å…±äº«è¨­å®š

å¦‚æœå¤šå°é›»è…¦éœ€è¦å­˜å–åŒä¸€è³‡æ–™ï¼š

**Windows ç¶²è·¯å…±äº«ï¼š**

```cmd
# å…±äº«è³‡æ–™å¤¾
net share ATPData=C:\ATP_Data /grant:everyone,FULL

# å¾å…¶ä»–é›»è…¦å­˜å–
net use Z: \\ComputerName\ATPData
```

**macOS æª”æ¡ˆå…±äº«ï¼š**

1. ç³»çµ±åå¥½è¨­å®š â†’ å…±äº«
2. å•Ÿç”¨ã€Œæª”æ¡ˆå…±äº«ã€
3. åŠ å…¥è¦å…±äº«çš„è³‡æ–™å¤¾
4. è¨­å®šæ¬Šé™

---

## æ•ˆèƒ½èª¿æ ¡

### JVM è¨˜æ†¶é«”èª¿æ ¡

æ ¹æ“šç³»çµ±è³‡æºèª¿æ•´ JVM åƒæ•¸ï¼š

```bash
# å°å‹ç³»çµ±ï¼ˆ4GB RAMï¼‰
java -Xms256m -Xmx1024m -jar ATP_re.jar

# ä¸­å‹ç³»çµ±ï¼ˆ8GB RAMï¼‰
java -Xms512m -Xmx2048m -jar ATP_re.jar

# å¤§å‹ç³»çµ±ï¼ˆ16GB+ RAMï¼‰
java -Xms1024m -Xmx4096m -jar ATP_re.jar
```

### åƒåœ¾å›æ”¶èª¿æ ¡

```bash
# ä½¿ç”¨ G1 åƒåœ¾å›æ”¶å™¨ï¼ˆå»ºè­°ï¼‰
java -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -jar ATP_re.jar

# æˆ–ä½¿ç”¨ CMSï¼ˆè¼ƒèˆŠä½†ç©©å®šï¼‰
java -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -jar ATP_re.jar
```

### è³‡æ–™åº«æ•ˆèƒ½èª¿æ ¡

**å»ºç«‹ç´¢å¼•ï¼š**

```sql
-- åœ¨å¸¸ç”¨æŸ¥è©¢æ¬„ä½å»ºç«‹ç´¢å¼•
CREATE INDEX idx_task_train_number ON atp_tasks(train_number);
CREATE INDEX idx_task_start_time ON atp_tasks(start_time);
CREATE INDEX idx_event_timestamp ON atp_events(timestamp);
CREATE INDEX idx_speed_timestamp ON speed_records(timestamp);
```

**æŸ¥è©¢å„ªåŒ–ï¼š**

```sql
-- å®šæœŸæ›´æ–°çµ±è¨ˆè³‡è¨Š
UPDATE STATISTICS atp_tasks;
UPDATE STATISTICS atp_events;
UPDATE STATISTICS speed_records;

-- é‡å»ºç´¢å¼•
ALTER INDEX ALL ON atp_tasks REBUILD;
```

---

## å®‰å…¨æ€§è¨­å®š

### 1. æª”æ¡ˆç³»çµ±æ¬Šé™

**Windows:**
```cmd
# é™åˆ¶ç¨‹å¼ç›®éŒ„åªæœ‰ç®¡ç†å“¡å¯å¯«å…¥
icacls "C:\Program Files\ATP_re" /inheritance:r
icacls "C:\Program Files\ATP_re" /grant:r Administrators:(OI)(CI)F
icacls "C:\Program Files\ATP_re" /grant:r Users:(OI)(CI)RX

# è³‡æ–™ç›®éŒ„å…è¨±å¯«å…¥
icacls "C:\ATP_Data" /grant Users:(OI)(CI)M
```

**macOS:**
```bash
# é™åˆ¶ç¨‹å¼ç›®éŒ„
sudo chown -R root:wheel /Applications/ATP_re
sudo chmod -R 755 /Applications/ATP_re

# è³‡æ–™ç›®éŒ„å…è¨±å¯«å…¥
sudo chown -R $USER:staff /Users/Shared/ATP_Data
chmod -R 755 /Users/Shared/ATP_Data
```

### 2. è³‡æ–™åº«å®‰å…¨

```sql
-- ä½¿ç”¨å¼·å¯†ç¢¼
ALTER LOGIN atp_user WITH PASSWORD = 'YourV3ryStr0ngP@ssw0rd!';

-- é™åˆ¶æ¬Šé™
REVOKE ALL ON DATABASE ATP_DB FROM PUBLIC;
GRANT CONNECT ON DATABASE ATP_DB TO atp_user;

-- å•Ÿç”¨é€£ç·šåŠ å¯†
-- åœ¨ SQL Server Configuration Manager ä¸­è¨­å®š SSL
```

### 3. åŠ å¯†æ•æ„Ÿè³‡æ–™

åœ¨ `config/database.properties` ä¸­ä½¿ç”¨åŠ å¯†å¯†ç¢¼ï¼š

```properties
# ä¸è¦æ˜æ–‡å„²å­˜å¯†ç¢¼ï¼
# ä½¿ç”¨åŠ å¯†å·¥å…·ç”ŸæˆåŠ å¯†å¯†ç¢¼
db.password.encrypted=true
db.password=ENC(encryptedPasswordHere)
```

### 4. æ—¥èªŒå®‰å…¨

```properties
# ä¸è¦åœ¨æ—¥èªŒä¸­è¨˜éŒ„æ•æ„Ÿè³‡è¨Š
log.mask.sensitive=true
log.exclude.patterns=password,secret,token
```

---

## å‚™ä»½èˆ‡é‚„åŸ

### è‡ªå‹•å‚™ä»½è¨­å®š

å»ºç«‹å‚™ä»½è…³æœ¬ï¼š

**Windows (backup.bat):**
```batch
@echo off
set BACKUP_DIR=D:\ATP_Backup\%date:~0,4%%date:~5,2%%date:~8,2%
mkdir %BACKUP_DIR%

REM å‚™ä»½è³‡æ–™åº«
sqlcmd -S localhost -U sa -P YourPassword -Q "BACKUP DATABASE ATP_DB TO DISK='%BACKUP_DIR%\ATP_DB.bak'"

REM å‚™ä»½è³‡æ–™æª”æ¡ˆ
xcopy "C:\ATP_Data" "%BACKUP_DIR%\data\" /E /I /Y

REM å‚™ä»½è¨­å®šæª”
xcopy "C:\Program Files\ATP_re\config" "%BACKUP_DIR%\config\" /E /I /Y

echo å‚™ä»½å®Œæˆ: %BACKUP_DIR%
```

**macOS (backup.sh):**
```bash
#!/bin/bash
BACKUP_DIR="/Users/Shared/ATP_Backup/$(date +%Y%m%d)"
mkdir -p "$BACKUP_DIR"

# å‚™ä»½è³‡æ–™åº«
pg_dump -U atp_user ATP_DB > "$BACKUP_DIR/ATP_DB.sql"

# å‚™ä»½è³‡æ–™æª”æ¡ˆ
cp -r /Users/Shared/ATP_Data "$BACKUP_DIR/data"

# å‚™ä»½è¨­å®šæª”
cp -r /Applications/ATP_re/config "$BACKUP_DIR/config"

echo "å‚™ä»½å®Œæˆ: $BACKUP_DIR"
```

### æ’ç¨‹è‡ªå‹•å‚™ä»½

**Windowsï¼ˆä½¿ç”¨å·¥ä½œæ’ç¨‹å™¨ï¼‰:**
```cmd
# å»ºç«‹æ¯æ—¥å‡Œæ™¨ 2:00 åŸ·è¡Œçš„å‚™ä»½ä»»å‹™
schtasks /create /tn "ATP_re Backup" /tr "D:\Scripts\backup.bat" /sc daily /st 02:00
```

**macOSï¼ˆä½¿ç”¨ cronï¼‰:**
```bash
# ç·¨è¼¯ crontab
crontab -e

# åŠ å…¥ä»¥ä¸‹å…§å®¹ï¼ˆæ¯æ—¥å‡Œæ™¨ 2:00 åŸ·è¡Œï¼‰
0 2 * * * /Users/Shared/Scripts/backup.sh
```

### é‚„åŸè³‡æ–™

**Windows:**
```batch
REM é‚„åŸè³‡æ–™åº«
sqlcmd -S localhost -U sa -P YourPassword -Q "RESTORE DATABASE ATP_DB FROM DISK='D:\ATP_Backup\20231201\ATP_DB.bak' WITH REPLACE"

REM é‚„åŸè³‡æ–™æª”æ¡ˆ
xcopy "D:\ATP_Backup\20231201\data" "C:\ATP_Data\" /E /I /Y

REM é‚„åŸè¨­å®šæª”
xcopy "D:\ATP_Backup\20231201\config" "C:\Program Files\ATP_re\config\" /E /I /Y
```

**macOS:**
```bash
# é‚„åŸè³‡æ–™åº«
psql -U atp_user ATP_DB < /Users/Shared/ATP_Backup/20231201/ATP_DB.sql

# é‚„åŸè³‡æ–™æª”æ¡ˆ
cp -r /Users/Shared/ATP_Backup/20231201/data/* /Users/Shared/ATP_Data/

# é‚„åŸè¨­å®šæª”
cp -r /Users/Shared/ATP_Backup/20231201/config/* /Applications/ATP_re/config/
```

---

## å‡ç´šæŒ‡å—

### å‡ç´šå‰æº–å‚™

1. **å‚™ä»½ç¾æœ‰ç³»çµ±**
   ```bash
   # åŸ·è¡Œå®Œæ•´å‚™ä»½
   ./backup.sh  # æˆ– backup.bat
   ```

2. **è¨˜éŒ„ç›®å‰ç‰ˆæœ¬**
   ```bash
   java -jar ATP_re.jar --version
   ```

3. **é–±è®€ç‰ˆæœ¬èªªæ˜**
   - æŸ¥çœ‹ CHANGELOG.md
   - æ³¨æ„ä¸ç›¸å®¹çš„è®Šæ›´

### å‡ç´šæ­¥é©Ÿ

1. **åœæ­¢æ‡‰ç”¨ç¨‹å¼**
   
   **Windows:**
   ```cmd
   # å¦‚æœä½œç‚ºæœå‹™åŸ·è¡Œ
   net stop ATP_re
   
   # æˆ–é—œé–‰æ‡‰ç”¨ç¨‹å¼è¦–çª—
   ```
   
   **macOS:**
   ```bash
   # å¦‚æœä½¿ç”¨ LaunchAgent
   launchctl stop com.atp.atp_re
   
   # æˆ–ä½¿ç”¨ kill
   pkill -f ATP_re.jar
   ```

2. **å‚™ä»½èˆŠç‰ˆæœ¬**
   
   ```bash
   # Windows
   move "C:\Program Files\ATP_re" "C:\Program Files\ATP_re_old"
   
   # macOS
   mv /Applications/ATP_re /Applications/ATP_re_old
   ```

3. **å®‰è£æ–°ç‰ˆæœ¬**
   
   æŒ‰ç…§æ­£å¸¸å®‰è£æ­¥é©Ÿå®‰è£æ–°ç‰ˆæœ¬

4. **é·ç§»è¨­å®šæª”**
   
   ```bash
   # Windows
   xcopy "C:\Program Files\ATP_re_old\config\*" "C:\Program Files\ATP_re\config\" /Y
   
   # macOS
   cp /Applications/ATP_re_old/config/* /Applications/ATP_re/config/
   ```

5. **åŸ·è¡Œè³‡æ–™åº«å‡ç´šè…³æœ¬**ï¼ˆå¦‚æœ‰ï¼‰
   
   ```bash
   # åŸ·è¡Œç‰ˆæœ¬å‡ç´šè…³æœ¬
   sqlcmd -S localhost -U atp_user -P Password -d ATP_DB -i "upgrade_v1.0_to_v1.1.sql"
   ```

6. **å•Ÿå‹•æ–°ç‰ˆæœ¬**
   
   ```bash
   # å•Ÿå‹•ä¸¦æª¢æŸ¥æ—¥èªŒ
   java -jar ATP_re.jar
   ```

7. **é©—è­‰å‡ç´š**
   
   - æª¢æŸ¥ç‰ˆæœ¬è™Ÿ
   - æ¸¬è©¦ä¸»è¦åŠŸèƒ½
   - æŸ¥çœ‹æ—¥èªŒæª”

8. **æ¸…ç†èˆŠç‰ˆæœ¬**ï¼ˆç¢ºèªæ–°ç‰ˆæœ¬æ­£å¸¸å¾Œï¼‰
   
   ```bash
   # Windows
   rmdir /s /q "C:\Program Files\ATP_re_old"
   
   # macOS
   rm -rf /Applications/ATP_re_old
   ```

---

## æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

**å•é¡Œ 1ï¼šç„¡æ³•å•Ÿå‹• - æ‰¾ä¸åˆ° Java**

è§£æ±ºæ–¹æ³•ï¼š
```bash
# æª¢æŸ¥ Java å®‰è£
java -version

# è¨­å®š JAVA_HOME
# Windows
setx JAVA_HOME "C:\Program Files\Java\jre1.8.0_211"

# macOS
export JAVA_HOME=$(/usr/libexec/java_home)
```

**å•é¡Œ 2ï¼šè¨˜æ†¶é«”ä¸è¶³éŒ¯èª¤**

è§£æ±ºæ–¹æ³•ï¼š
```bash
# å¢åŠ æœ€å¤§è¨˜æ†¶é«”
java -Xmx4096m -jar ATP_re.jar
```

**å•é¡Œ 3ï¼šè³‡æ–™åº«é€£ç·šå¤±æ•—**

æª¢æŸ¥é …ç›®ï¼š
1. è³‡æ–™åº«æœå‹™æ˜¯å¦åŸ·è¡Œ
2. é€£ç·šè³‡è¨Šæ˜¯å¦æ­£ç¢º
3. é˜²ç«ç‰†æ˜¯å¦é˜»æ“‹
4. ä½¿ç”¨è€…æ¬Šé™æ˜¯å¦è¶³å¤ 

**å•é¡Œ 4ï¼šåŸ è™Ÿè¡çª**

è§£æ±ºæ–¹æ³•ï¼š
```properties
# ä¿®æ”¹ application.properties
server.port=8081
```

---

## é™„éŒ„

### A. è¨­å®šæª”ç¯„æœ¬

å®Œæ•´çš„ `application.properties` ç¯„æœ¬ï¼š

```properties
# ===========================================
# ATP_re æ‡‰ç”¨ç¨‹å¼è¨­å®šæª”
# ===========================================

# æ‡‰ç”¨ç¨‹å¼åŸºæœ¬è³‡è¨Š
app.name=ATP_re
app.version=1.0
app.language=zh_TW
app.timezone=Asia/Taipei

# è³‡æ–™è·¯å¾‘è¨­å®š
data.ru.path=/path/to/ru/data
data.mmi.path=/path/to/mmi/data
data.output.path=/path/to/output
data.reports.path=/path/to/reports
data.temp.path=/path/to/temp

# æ—¥èªŒè¨­å®š
log.level=INFO
log.path=/path/to/logs
log.max.size=10MB
log.max.history=30
log.pattern=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# UI è¨­å®š
ui.theme=default
ui.font.name=Microsoft JhengHei
ui.font.size=12
ui.window.width=1280
ui.window.height=800
ui.window.maximized=false

# æ•ˆèƒ½è¨­å®š
performance.thread.pool.size=4
performance.batch.size=100
performance.cache.enabled=true
performance.cache.size=1000

# è§£ç¢¼å™¨è¨­å®š
decoder.strict.mode=false
decoder.validate.checksum=true
decoder.auto.retry=true
decoder.retry.count=3

# è‡ªå‹•å„²å­˜è¨­å®š
autosave.enabled=true
autosave.interval=300

# ç¶²è·¯è¨­å®š
network.timeout=30000
network.retry=3
network.proxy.enabled=false
network.proxy.host=
network.proxy.port=
```

### B. ç³»çµ±éœ€æ±‚æª¢æŸ¥è…³æœ¬

**Windows (check_system.bat):**
```batch
@echo off
echo ========================================
echo ATP_re ç³»çµ±éœ€æ±‚æª¢æŸ¥
echo ========================================
echo.

echo æª¢æŸ¥ Java...
java -version 2>&1 | find "version" > nul
if %errorlevel% == 0 (
    echo [OK] Java å·²å®‰è£
    java -version
) else (
    echo [FAIL] æœªæ‰¾åˆ° Java
)
echo.

echo æª¢æŸ¥ç£ç¢Ÿç©ºé–“...
for /f "tokens=3" %%a in ('dir C:\ ^| find "bytes free"') do set FREE=%%a
echo C:\ å¯ç”¨ç©ºé–“: %FREE% bytes
echo.

echo æª¢æŸ¥è¨˜æ†¶é«”...
wmic OS get FreePhysicalMemory
echo.

echo ========================================
echo æª¢æŸ¥å®Œæˆ
echo ========================================
pause
```

**macOS (check_system.sh):**
```bash
#!/bin/bash
echo "========================================"
echo "ATP_re ç³»çµ±éœ€æ±‚æª¢æŸ¥"
echo "========================================"
echo

echo "æª¢æŸ¥ Java..."
if command -v java &> /dev/null; then
    echo "[OK] Java å·²å®‰è£"
    java -version
else
    echo "[FAIL] æœªæ‰¾åˆ° Java"
fi
echo

echo "æª¢æŸ¥ç£ç¢Ÿç©ºé–“..."
df -h /
echo

echo "æª¢æŸ¥è¨˜æ†¶é«”..."
vm_stat | grep "Pages free" | awk '{print $3}'
echo

echo "========================================"
echo "æª¢æŸ¥å®Œæˆ"
echo "========================================"
```

---

**ç‰ˆæ¬Šè²æ˜**  
Â© 2025 ATP_re Project. All rights reserved.

**æ–‡ä»¶ç¶­è­·**  
å¦‚ç™¼ç¾æ–‡ä»¶éŒ¯èª¤æˆ–éœ€è¦è£œå……ï¼Œè«‹æäº¤ GitHub Issue æˆ– Pull Requestã€‚

---

*æœ€å¾Œæ›´æ–°ï¼š2025-11-09*  
*æ–‡ä»¶ç‰ˆæœ¬ï¼š1.0*
